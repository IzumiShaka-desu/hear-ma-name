<!DOCTYPE html>
<html>

<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    Fore more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base
  -->
  <base href="/">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="hear_ma_name">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <title>hear_ma_name</title>
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <!-- This script installs service_worker.js to provide PWA functionality to
       application. For more information, see:
       https://developers.google.com/web/fundamentals/primers/service-workers -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('flutter-first-frame', function () {
        navigator.serviceWorker.register('flutter_service_worker.js?v=1934872089');
      });
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.7/Tone.js" type="application/javascript"></script>
  <script src="main.dart.js" type="application/javascript"></script>
  <script>
    function playNote(note, duration) {
      var synth = new Tone.Synth().toDestination();
      synth.triggerAttackRelease(note, duration);
    }
    function playNotes(notes, durations, length) {
      const sampler = new Tone.Sampler({
        urls: {
          "C4": "C4.mp3",
          "D#4": "Ds4.mp3",
          "F#4": "Fs4.mp3",
          "A4": "A4.mp3",
        },
        release: 1,
        baseUrl: "https://tonejs.github.io/audio/salamander/",
      }).toDestination();
      
      // Tone.loaded().then(() => {
        const now = Tone.now()
        //   // notes = ["D4", "F4", "A4", "C5", "E5"];
        //   // durations = ['0.5', '1', '0.5', '0.5', '0.5'];
        //   console.log(allNotes);
        //   console.log(duration)
        // sampler.triggerAttackRelease(["Eb4", "G4", "Bb4"], 4);
        notes = ["D4", "F4", "A4", "C5", "E5"];
        duration = ['0.5', '1', '0.5', '0.5', '0.5'];
        //   console.log(allNotes);
        //   console.log(duration)
        // duration = [];
        // allNotes = [];
        // notes = notes.split("|");
        // durations = durations.split("|");
        // function addNotes(value, index) {
        //   allNotes.push(value);
        //   duration.push(durations[index]);
        // }
        // notes.forEach(addNotes);
        // console.log(notes);
        // console.log(durations);
        function play(note, index) {
          sampler.triggerAttackRelease(note, duration[index], now + (index));
        }
        notes.forEach(play);
        // sampler.triggerAttackRelease(notes, 4,0);
        // sampler.triggerAttackRelease(["Eb4", "G4", "Bb4"], 7,1);

      });
    }


    // function playNotes(notes, durations, length) {
    //   // const synth = new Tone.Synth().toDestination();
    //   const synth = new Tone.Sampler({
    //     urls: {
    //       "C4": "C4.mp3",
    //       "D#4": "Ds4.mp3",
    //       "F#4": "Fs4.mp3",
    //       "A4": "A4.mp3",
    //     },
    //     release: 1,
    //     baseUrl: "https://tonejs.github.io/audio/salamander/",
    //   }).toDestination();

    //   const now = Tone.now()
    //   duration = [];
    //   allNotes = [];
    //   notes = notes.split("|");
    //   durations = durations.split("|");
    //   function addNotes(value, index) {
    //     allNotes.push(value);
    //     duration.push(durations[index]);
    //   }
    //   notes.forEach(addNotes);
    //   console.log(notes);
    //   console.log(durations);
    //   // notes = ["D4", "F4", "A4", "C5", "E5"];
    //   // durations = ['0.5', '1', '0.5', '0.5', '0.5'];
    //   console.log(allNotes);
    //   console.log(duration)
    //   function play(note, index) {
    //     synth.triggerAttackRelease(note, duration[index] + "s", now + (index));
    //   }
    //   allNotes.forEach(play);
    // }
  </script>
</body>

</html>